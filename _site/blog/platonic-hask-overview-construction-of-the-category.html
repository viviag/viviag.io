<!DOCTYPE html><html lang="en" dir="ltr"> <!-- for mathjax support --> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } }); </script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script><head> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2EM85N0LNV"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2EM85N0LNV'); </script><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Platonic Hask overview: construction of the category | Vitalii Guzeev</title><meta name="description" content="Blog and entry point to my online appearance"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/blog/platonic-hask-overview-construction-of-the-category"><link rel="stylesheet" href="/assets/style.css"><body><main><h2 class="title">Vitalii Guzeev</h2><nav> <a href="http://localhost:4000">Home</a> <a href="http://localhost:4000/blog">Blog</a> <a href="http://localhost:4000/links.html">Links</a> <a href="http://localhost:4000/LICENSE.html">License</a> <a href="http://localhost:4000/usr.html">Face2face</a> <a href="https://github.com/viviag/viviag.io/issues">[Discuss]</a> <a href="/feed.xml">[RSS]</a></nav><h1>Platonic Hask overview: construction of the category</h1><i>Aug 10, 2022</i><h4 class="subtitle"></h4><p><em><a href="https://viviag.io/tagged/hask/">To index of the series</a></em></p><p>Let’s start with a basic definition:</p><h5 id="definition">Definition</h5><p>An entity \(\mathrm{C}\) is a category if all of the following holds:</p><ol><li>There exists class \(\operatorname{Ob}(\mathrm{C})\) of objects of \(\mathrm{C}\).<li>\(\forall A, B \in \operatorname{Ob}(\mathrm{C})\) there exists class \(\operatorname{Hom}_{\mathrm{C}}(A,B)\) of morphisms between \(A\) and \(B\) in \(\mathrm{C}\).<li>There exists a binary operation \(\circ\) called composition such that:<ul><li>\(\forall A, B, C \in \operatorname{Ob}(\mathrm{C}),\; f \in \operatorname{Hom}_{\mathrm{C}}(A,B),\; g \in \operatorname{Hom}_{\mathrm{C}}(B,C)\) there exists \(g \circ f \in \operatorname{Hom}_{\mathrm{C}}(A,C)\).<li>\(\forall A \in \operatorname{Ob}(\mathrm{C})\) there exists morphism \(Id_A \in \operatorname{Hom}_{\mathrm{C}}(A,A)\) such that \(\forall f \in \operatorname{Hom}(A,B)\) holds \(f = f \circ Id_A = Id_A \circ f\).<li>\(\circ\) is associative.</ul></ol><p>Category with class \(\operatorname{Ob}\) and all \(\operatorname{Hom}\)-classes being sets is called small.</p><h5 id="examples">Examples</h5><p>A basic example of a category is \(Set\) — category with objects — sets and morphisms — functions between sets.</p><p>We want to construct a reasonable category out of Haskell types. We might want to construct a reasonable category out of abstract types. For this purpose Haskell is a good yardstick and support — it was designed with respect to category theory and we can go far by judging the existence of some constructions in our category by the existence of their GHC implementations.</p><p><strong>First attempt</strong></p><p>Let’s consider \(Hask'\) with \(\operatorname{Ob}(Hask')\) — types of Haskell and \(\operatorname{Hom}_{Hask'}(A,B)\) — all functions (closed expressions) of type $A \to B$.</p><p>It is not a category — <code class="language-plaintext highlighter-rouge">seq undefined () = _|_</code> and <code class="language-plaintext highlighter-rouge">seq (undefined . id) () = ()</code>, hence <code class="language-plaintext highlighter-rouge">undefined</code> \(\neq\) <code class="language-plaintext highlighter-rouge">undefined . id</code>. See <a href="http://math.andrej.com/2016/08/06/hask-is-not-a-category/">post by Andrej Bauer and discussion</a>. <a href="https://wiki.haskell.org/Hask">Haskell wiki</a> knows several more examples where the bottom breaks abstractions.</p><p>Failure of this attempt makes whole categorical reasoning about Haskell limited but still useful. Unfortunately, the real world is contradictory.</p><p><strong>Second attempt</strong></p><p>Consider \(\operatorname{Ob}(Hask)\) — Haskell types without \(\bot\) with natural \(\operatorname{Hom}\)-sets — all functions between these platonic types excluding partial and nonterminating functions. To shorten notation here we overload terms of Haskell Wiki. <code class="language-plaintext highlighter-rouge">Wiki.Hask = Hask'; Wiki.Platonic Hask = Hask</code>.</p><p>Note: I’m not using the term “Maximal total subset of Haskell” in the sense of <a href="https://en.wikipedia.org/wiki/Total_functional_programming">Wikipedia article</a> since I’m not talking about provability here. The set of functions we take seems not to have a constructive definition and is broader.</p><h5 id="claim">Claim</h5><p>\(Hask\) is a category.</p><h5 id="proof">Proof</h5><p>With the assumption of totality and termination of all functions equational reasoning is legal (Church-Rosser property holds — it was the exact property broken by \(\bot\)).</p><p>We only have to check the properties of the composition:</p><ul><li>Composition <a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/src/GHC.Base.html#.">exists</a>.<li>Composition is associative:<ul><li><code class="language-plaintext highlighter-rouge">f . (g . h) =(1) \y -&gt; f (\x -&gt; g (h x) $ y) =(2) \y -&gt; f (g (h y))</code><li><code class="language-plaintext highlighter-rouge">(f . g) . h =(1) \y -&gt; (\x -&gt; f (g x) $ h y) =(2) \y -&gt; f (g (h y))</code></ul><li>Identity <a href="https://hackage.haskell.org/package/base-4.17.0.0/docs/src/GHC.Base.html#id">exists</a>.<li><code class="language-plaintext highlighter-rouge">seq</code> in a previous attempt violated identity law. Proof of the identity law by equational reasoning is trivial.</ul><p>(1) in equations represents taking definition, (2) refers to \(\beta\)-reduction, in both cases, we follow the applicative order of evaluation. Equality is the \(\alpha\)-congruence relation.</p><p>Following posts will operate \(Hask\).</p><p>The category \(Hask\) is not equivalent to \(Set\): consider the type <code class="language-plaintext highlighter-rouge">data Foo = Foo (Foo -&gt; Bool)</code>. The map <code class="language-plaintext highlighter-rouge">Foo :: (Foo -&gt; Bool) -&gt; Foo</code> is an injective map from \(2^{Foo}\) to \(Foo\). This situation is impossible in \(Set\). Here is an older <a href="https://www.reddit.com/r/haskell/comments/sz4ghr/comment/hy3916c/?utm_source=share&amp;utm_medium=web2x&amp;context=3">Reference</a>.</p><h5 id="remarks">Remarks</h5><ol><li><p>It is also common to denote \(Hom_{\mathrm{C}}(A,A)\) as \(End_{\mathrm{C}}(A)\) — set of endomorphisms of \(A\).</p><li><p>I will frequently use the following notation:</p><ul><li><code class="language-plaintext highlighter-rouge">f : A</code> for element \(f\) of \(A \in \operatorname{Ob}(Hask)\)<li><code class="language-plaintext highlighter-rouge">f : A -&gt; B</code> for \(f \in \operatorname{Hom}_{Hask}(A,B)\)</ul></ol></main><footer> <a href="/blog">← Back to all writings</a> <!--<nav class="sans"><hr> <input class="menu-btn" type="checkbox" id="menu-btn" /><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--> <!-- <span class="mini-note">You've reached the end of the page. Good job!</span> --> <!--<nav class="sans"><hr><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--><div class="bottom-footer"> <i>Theme <a href="https://knhash.in/jekyllBear" title="the art">jekyllBear</a> built and maintained by <a href="https://knhash.in" title="the artist">knhash</a> </i></div></footer><!-- <script type="text/x-mathjax-config"> MathJax.Hub.Config({ extensions: ["tex2jax.js", "TeX/AMSmath.js"], jax: ["input/TeX", "output/SVG"], }) </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=default"> </script> -->
