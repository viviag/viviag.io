<!DOCTYPE html><html lang="en" dir="ltr"> <!-- for mathjax support --><head> <!-- Yandex.Metrika counter --> <script type="text/javascript" > (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date(); for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }} k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(94301673, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true }); </script> <noscript><div><img src="https://mc.yandex.ru/watch/94301673" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Release: dbmonitor-0.1.0 | Vitalii Guzeev</title><meta name="description" content="Blog and entry point to my online appearance"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/blog/dbmonitor-0-1-0-released"><link rel="stylesheet" href="/assets/style.css"> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2EM85N0LNV"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2EM85N0LNV'); </script><body><main><h2 class="title">Vitalii Guzeev</h2><nav> <a href="http://localhost:4000">Home</a> <a href="http://localhost:4000/blog">Blog</a> <a href="http://localhost:4000/links.html">Links</a> <a href="http://localhost:4000/LICENSE.html">License</a> <a href="http://localhost:4000/usr.html">Face2face</a> <a href="https://github.com/viviag/viviag.io/issues">[Discuss]</a> <a href="/feed.xml">[RSS]</a></nav><h1>Release: dbmonitor-0.1.0</h1><i>Aug 08, 2022</i><h4 class="subtitle"></h4><p>Initial release of a tool. See <a href="https://hackage.haskell.org/package/dbmonitor">https://hackage.haskell.org/package/dbmonitor</a>.</p><p>This is a database consistency monitoring tool with Telegram alerts. See README on <a href="https://hackage.haskell.org/package/dbmonitor">hackage</a>.</p><p>Its most advanced feature is a hot swap of any checks and configuration files. Key dependencies: async, fsnotify, hasql, telegram-bot-simple.</p><p>Several usage scenarios I have in mind:</p><ol><li>DBA or QA engineer uses corporate vpn and has direct access to production or staging database from his working machine. He can install dbmonitor, set it up for required databases, run it (Unix-like systems case) via <code class="language-plaintext highlighter-rouge">dbmonitor &gt; .monitor.log &amp;</code> and add line <code class="language-plaintext highlighter-rouge">@reboot dbmonitor &gt; .monitor.log</code> to crontab. After that if he has some suspicion he can add new check and he will instantly start to receive alerts. It can be useful to find bugs related to incorrect program termination or lack of ACID guarantees.<li>Same setting as 1. on a local machine of responsible developer who want to perform long-term testing of corner cases before opening merge request.<li>In MCCME we use it on a Kubernetes pod in a docker container. Hence we do not use hot swap feature, but instrument still works for its purpose and gains persistence, however is not as convenient in usage as in case 1. We (credits to <a href="https://github.com/aeifn">Egor Kuzmichev</a>) provide docker image suitable for this scenario.</ol><p>I appreciate any feedback here and in <a href="https://github.com/pandora-mccme/hdbmonitor/issues">issues</a>.</p></main><footer> <a href="/blog">‚Üê Back to all writings</a> <!--<nav class="sans"><hr> <input class="menu-btn" type="checkbox" id="menu-btn" /><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--> <!-- <span class="mini-note">You've reached the end of the page. Good job!</span> --> <!--<nav class="sans"><hr><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--><div class="bottom-footer"> <i>Theme <a href="https://knhash.in/jekyllBear" title="the art">jekyllBear</a> built and maintained by <a href="https://knhash.in" title="the artist">knhash</a> </i></div></footer><!-- <script type="text/x-mathjax-config"> MathJax.Hub.Config({ extensions: ["tex2jax.js", "TeX/AMSmath.js"], jax: ["input/TeX", "output/SVG"], }) </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=default"> </script> -->
